<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"
   [
    <!ENTITY mmlevel  "org.mmbase.util.logging.log4j.Log4jLevel" >
    <!ENTITY logdir   "/export/home/mmweb/log/test/" >
]>
<log4j:configuration   debug="false" xmlns:log4j="http://jakarta.apache.org/log4j/" >

  <appender name="logfile" class="org.apache.log4j.DailyRollingFileAppender" >
    <param name="File" value="&logdir;mmbase.log" />
    <param name="DatePattern" value="'.'yyyy-MM-dd" />
    <param name="Encoding"   value="UTF-8" />    
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d{ABSOLUTE} %-7p %c{4} - %m%n" />
    </layout>
  </appender>

  <!-- 
  A different appender for 'page' logging. This is writing to stdout now too, but probably you want 
  this to go to another file.
  -->     
  <appender name="pagedebug" class="org.apache.log4j.DailyRollingFileAppender" >
    <param name="File" value="&logdir;mmbase-pages.log" />
    <param name="DatePattern" value="'.'yyyy-MM-dd" />
    <param name="Encoding"   value="UTF-8" />    
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d{MM-dd HH:mm:ss} PAGE %-7p %c{2} %L - %m%n" />
    </layout>
  </appender>


  <appender name="sqllog" class="org.apache.log4j.DailyRollingFileAppender" >
    <param name="File" value="&logdir;mmbase-sql.log" />
    <param name="DatePattern" value="'.'yyyy-MM-dd" />
    <param name="Encoding"   value="UTF-8" />    
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d{MM-dd HH:mm:ss} %m%n" />
    </layout>
  </appender>
  
  
  <!-- categories -->
  <logger name="org.mmbase.security" >
    <level class="&mmlevel;" value ="warn" />
  </logger>

<logger name="org.mmbase.security.classsecurity" >
    <level class="&mmlevel;" value ="service" />
  </logger>


<logger name="org.mmbase.bridge.jsp.taglib.pageflow.IncludeTag" >
    <level class="&mmlevel;" value ="service" />
  </logger>


  <!-- 'page logging' goes to a different appender -->
  <logger name="org.mmbase.PAGE" additivity="false">
    <level class="&mmlevel;" value ="debug" />
    <appender-ref ref="pagedebug" />
  </logger>

  <!-- SQL logging -->
  <logger name="org.mmbase.module.database.MultiConnection" additivity="false">
    <level class="&mmlevel;" value ="service" />   
    <appender-ref ref="sqllog" />
  </logger>

  
  <!-- 
  STDERR is a special Category, to wich stderr will be written
  (always with level 'warn' or higher)  
  The level can be set to 'fatal' and the stderr will not be
  redirected to mmbase logging.
  -->
 
  <logger name="STDERR">
    <level class="&mmlevel;" value ="fatal" />	
  </logger>
  
  <root>
    <level class="&mmlevel;" value ="service" />
    <appender-ref ref="logfile" />
  </root>

</log4j:configuration>
